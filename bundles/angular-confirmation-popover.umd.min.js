!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("positioning")):"function"==typeof define&&define.amd?define("angular-confirmation-popover",["exports","@angular/core","@angular/common","positioning"],t):t((e=e||self)["angular-confirmation-popover"]={},e.ng.core,e.ng.common,e.positioning)}(this,(function(e,t,n,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};Object.create;Object.create;var r=function(){this.confirmText="Confirm",this.cancelText="Cancel",this.confirmButtonType="success",this.cancelButtonType="outline-secondary",this.placement="top",this.hideConfirmButton=!1,this.hideCancelButton=!1,this.popoverClass="",this.appendToBody=!1,this.reverseButtonOrder=!1,this.closeOnOutsideClick=!0};r.ɵfac=function(e){return new(e||r)},r.ɵprov=t.ɵɵdefineInjectable({token:r,factory:r.ɵfac});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(r);c.ɵfac=function(e){return s(e||c)},c.ɵprov=t.ɵɵdefineInjectable({token:c,factory:c.ɵfac});var s=t.ɵɵgetInheritedFactory(c),p=function(){function e(e){this.elm=e}return e.prototype.ngOnChanges=function(e){e.mwlFocus&&!0===this.mwlFocus&&this.elm.nativeElement.focus()},e}();function a(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",9),t.ɵɵelementStart(1,"button",10),t.ɵɵlistener("click",(function(e){return t.ɵɵrestoreView(o),t.ɵɵnextContext().options.onCancel({clickEvent:e})})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext().options;t.ɵɵadvance(1),t.ɵɵclassMap("btn btn-block btn-"+i.cancelButtonType),t.ɵɵproperty("mwlFocus","cancel"===i.focusButton)("innerHtml",i.cancelText,t.ɵɵsanitizeHtml)}}function l(e,n){if(1&e){var o=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div",9),t.ɵɵelementStart(1,"button",10),t.ɵɵlistener("click",(function(e){return t.ɵɵrestoreView(o),t.ɵɵnextContext().options.onConfirm({clickEvent:e})})),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext().options;t.ɵɵadvance(1),t.ɵɵclassMap("btn btn-block btn-"+i.confirmButtonType),t.ɵɵproperty("mwlFocus","confirm"===i.focusButton)("innerHtml",i.confirmText,t.ɵɵsanitizeHtml)}}p.ɵfac=function(e){return new(e||p)(t.ɵɵdirectiveInject(t.ElementRef))},p.ɵdir=t.ɵɵdefineDirective({type:p,selectors:[["","mwlFocus",""]],inputs:{mwlFocus:"mwlFocus"},features:[t.ɵɵNgOnChangesFeature]});var u=function(e,t,n,o){return["popover",e,t,n,"bs-popover-auto",o]};function f(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",2),t.ɵɵelement(1,"div",3),t.ɵɵelement(2,"h3",4),t.ɵɵelementStart(3,"div",5),t.ɵɵelement(4,"p",6),t.ɵɵelementStart(5,"div",7),t.ɵɵtemplate(6,a,2,4,"div",8),t.ɵɵtemplate(7,l,2,4,"div",8),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var o=n.options;t.ɵɵproperty("ngClass",t.ɵɵpureFunction4(8,u,o.placement,"popover-"+o.placement,"bs-popover-"+o.placement,o.popoverClass)),t.ɵɵattribute("data-popper-placement",o.placement),t.ɵɵadvance(2),t.ɵɵproperty("innerHTML",o.popoverTitle,t.ɵɵsanitizeHtml),t.ɵɵadvance(2),t.ɵɵproperty("innerHTML",o.popoverMessage,t.ɵɵsanitizeHtml),t.ɵɵadvance(1),t.ɵɵclassProp("confirm-btns-reversed",o.reverseButtonOrder),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!o.hideCancelButton),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!o.hideConfirmButton)}}function m(e,t){}var d=function(e){return{options:e}},v=function(){function e(e){this.options=e}return e.prototype.ngAfterViewInit=function(){this.options.onAfterViewInit()},e}();v.ɵfac=function(e){return new(e||v)(t.ɵɵdirectiveInject(c))},v.ɵcmp=t.ɵɵdefineComponent({type:v,selectors:[["mwl-confirmation-popover-window"]],decls:3,vars:4,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],[1,"popover-arrow","arrow"],[1,"popover-title","popover-header",3,"innerHTML"],[1,"popover-content","popover-body"],[3,"innerHTML"],[1,"confirm-btns"],["class","confirm-btn-container",4,"ngIf"],[1,"confirm-btn-container"],["type","button",3,"mwlFocus","innerHtml","click"]],template:function(e,n){if(1&e&&(t.ɵɵtemplate(0,f,8,13,"ng-template",null,0,t.ɵɵtemplateRefExtractor),t.ɵɵtemplate(2,m,0,0,"ng-template",1)),2&e){var o=t.ɵɵreference(1);t.ɵɵadvance(2),t.ɵɵproperty("ngTemplateOutlet",n.options.customTemplate||o)("ngTemplateOutletContext",t.ɵɵpureFunction1(2,d,n.options))}},directives:[n.NgTemplateOutlet,n.NgClass,n.NgIf,p],styles:[".popover[_ngcontent-%COMP%]{display:block}.bs-popover-bottom[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-top[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{left:50%}.bs-popover-left[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%], .bs-popover-right[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{top:calc(50% - 8px)}.btn[_ngcontent-%COMP%]{transition:none}.confirm-btns[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.confirm-btn-container[_ngcontent-%COMP%]{flex-basis:50%}.confirm-btn-container[_ngcontent-%COMP%]:not(:first-child){margin-left:4px}.confirm-btn-container[_ngcontent-%COMP%]:not(:last-child){margin-right:4px}.confirm-btns-reversed[_ngcontent-%COMP%]{flex-direction:row-reverse}.confirm-btns-reversed[_ngcontent-%COMP%]   .confirm-btn-container[_ngcontent-%COMP%]:not(:first-child){margin-left:0;margin-right:4px}.confirm-btns-reversed[_ngcontent-%COMP%]   .confirm-btn-container[_ngcontent-%COMP%]:not(:last-child){margin-left:4px;margin-right:0}"]});var h=function(){function e(e,n,o,i,r){this.viewContainerRef=e,this.elm=n,this.defaultOptions=o,this.cfr=i,this.renderer=r,this.isDisabled=!1,this.isOpen=!1,this.isOpenChange=new t.EventEmitter(!0),this.confirm=new t.EventEmitter,this.cancel=new t.EventEmitter,this.eventListeners=[]}return e.prototype.ngOnInit=function(){this.isOpenChange.emit(!1)},e.prototype.ngOnChanges=function(e){e.isOpen&&(!0===e.isOpen.currentValue?this.showPopover():this.hidePopover())},e.prototype.ngOnDestroy=function(){this.hidePopover()},e.prototype.onConfirm=function(e){this.confirm.emit(e),this.hidePopover()},e.prototype.onCancel=function(e){this.cancel.emit(e),this.hidePopover()},e.prototype.togglePopover=function(){this.popover?this.hidePopover():this.showPopover()},e.prototype.onDocumentClick=function(e){var t=void 0!==this.closeOnOutsideClick?this.closeOnOutsideClick:this.defaultOptions.closeOnOutsideClick;this.popover&&!this.elm.nativeElement.contains(e.target)&&!this.popover.location.nativeElement.contains(e.target)&&t&&this.hidePopover()},e.prototype.showPopover=function(){var e=this;if(!this.popover&&!this.isDisabled){setTimeout((function(){e.eventListeners=[e.renderer.listen("document","click",(function(t){return e.onDocumentClick(t)})),e.renderer.listen("document","touchend",(function(t){return e.onDocumentClick(t)})),e.renderer.listen("window","resize",(function(){return e.positionPopover()}))]}));var n=new c;Object.assign(n,this.defaultOptions,{onConfirm:function(t){e.onConfirm(t)},onCancel:function(t){e.onCancel(t)},onAfterViewInit:function(){e.positionPopover()}});["confirmText","cancelText","placement","confirmButtonType","cancelButtonType","focusButton","hideConfirmButton","hideCancelButton","popoverClass","appendToBody","customTemplate","reverseButtonOrder","popoverTitle","popoverMessage"].forEach((function(t){void 0!==e[t]&&(n[t]=e[t])}));var o=this.cfr.resolveComponentFactory(v),i=t.Injector.create({providers:[{provide:c,useValue:n}]});this.popover=this.viewContainerRef.createComponent(o,this.viewContainerRef.length,i),n.appendToBody&&document.body.appendChild(this.popover.location.nativeElement),this.isOpenChange.emit(!0)}},e.prototype.positionPopover=function(){if(this.popover){var e=this.popover.location.nativeElement.children[0];o.positionElements(this.elm.nativeElement,e,this.placement||this.defaultOptions.placement,this.appendToBody||this.defaultOptions.appendToBody)}},e.prototype.hidePopover=function(){this.popover&&(this.popover.destroy(),delete this.popover,this.isOpenChange.emit(!1),this.eventListeners.forEach((function(e){return e()})),this.eventListeners=[])},e}();h.ɵfac=function(e){return new(e||h)(t.ɵɵdirectiveInject(t.ViewContainerRef),t.ɵɵdirectiveInject(t.ElementRef),t.ɵɵdirectiveInject(r),t.ɵɵdirectiveInject(t.ComponentFactoryResolver),t.ɵɵdirectiveInject(t.Renderer2))},h.ɵdir=t.ɵɵdefineDirective({type:h,selectors:[["","mwlConfirmationPopover",""]],hostBindings:function(e,n){1&e&&t.ɵɵlistener("click",(function(){return n.togglePopover()}))},inputs:{popoverTitle:"popoverTitle",popoverMessage:"popoverMessage",confirmText:"confirmText",cancelText:"cancelText",placement:"placement",confirmButtonType:"confirmButtonType",cancelButtonType:"cancelButtonType",focusButton:"focusButton",hideConfirmButton:"hideConfirmButton",hideCancelButton:"hideCancelButton",isDisabled:"isDisabled",isOpen:"isOpen",customTemplate:"customTemplate",popoverClass:"popoverClass",appendToBody:"appendToBody",reverseButtonOrder:"reverseButtonOrder",closeOnOutsideClick:"closeOnOutsideClick"},outputs:{isOpenChange:"isOpenChange",confirm:"confirm",cancel:"cancel"},features:[t.ɵɵNgOnChangesFeature]});var g=new t.InjectionToken("confirmation popover user options");function C(e){var t=new r;return Object.assign(t,e),t}var O=function(){function e(){}return e.forRoot=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[{provide:g,useValue:t},{provide:r,useFactory:C,deps:[g]}]}},e}();O.ɵmod=t.ɵɵdefineNgModule({type:O}),O.ɵinj=t.ɵɵdefineInjector({factory:function(e){return new(e||O)},imports:[[n.CommonModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(O,{declarations:[h,v,p],imports:[n.CommonModule],exports:[h,p]}),e.ConfirmationPopoverDirective=h,e.ConfirmationPopoverModule=O,e.FocusDirective=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-confirmation-popover.umd.min.js.map